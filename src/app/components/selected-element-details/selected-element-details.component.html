<div class="recipe-preview-container">
  <p class="recipe-preview-container__p"></p>
  <div class="recipe-content-container" *ngIf="loaded | async">
    <form
      class="recipe-content-container-form"
      [formGroup]="form"
      (ngSubmit)="onSubmit()"
    >
      <label class="recipe-content-container-form__label" for="name"
        >Recipe name:</label
      >
      <input
        class="recipe-content-container-form__input"
        placeholder="name"
        id="name"
        type="text"
        formControlName="name"
      />
      <label class="recipe-content-container-form__label" for="preparationTime"
        >Preperation time:</label
      >
      <input
        class="recipe-content-container-form__input"
        id="preparationTime"
        type="number"
        formControlName="preparationTime"
        placeholder="preperation time"
      />
      <label class="recipe-content-container-form__label" for="description"
        >Description:</label
      >
      <input
        class="recipe-content-container-form__input"
        id="description"
        type="text"
        formControlName="description"
        placeholder="description"
      />
      <button
        type="button"
        class="recipe-content-container-form__button-add-ingredients"
        *ngIf="(added | async) || (edittingMode | async)"
        (click)="addIngredientFormControl()"
      >
        Add Ingriedients
      </button>
      <div
        class="ingredients-container"
        formArrayName="ingredients"
        *ngIf="ingredientsLoaded | async"
      >
        <p class="ingredients-container__p">Ingredients:</p>

        <ng-container
          class="ingredients-container-ingredient"
          formGroupName="{{ i }}"
          *ngFor="let ingredient of getIngredients.controls; let i = index"
        >
          <input
            type="text"
            id="ingredientName"
            placeholder="ingredient name"
            class="ingredients-container-ingredient__input"
            formControlName="name"
          />
          <input
            type="text"
            id="ingredientQuantity"
            placeholder="ingredient quantity"
            class="ingredients-container-ingredient__input"
            formControlName="quantity"
          />
          <button
            *ngIf="(added | async) || (edittingMode | async)"
            (click)="deleteIngredient(i)"
            class="ingredients-container-ingredient__button"
          >
            <i class="pi pi-times"></i>
          </button>
        </ng-container>
      </div>
      <button
        class="recipe-content-container-form__button-cancel"
        (click)="cancelOperationOnRecipe()"
        *ngIf="(added | async) || (edittingMode | async)"
      >
        Cancel
      </button>
      <button
        (click)="creatingNewRecipe()"
        class="recipe-content-container-form__button-add"
        *ngIf="added | async"
        type="submit"
      >
        Add
      </button>
      <button
        (click)="updateExistingRecipe()"
        class="recipe-content-container-form__button-update"
        *ngIf="edittingMode | async"
        type="submit"
      >
        Update
      </button>
    </form>
  </div>
</div>
